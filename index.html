<!doctype html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>SkuldKoll</title>
  <meta name="theme-color" content="#111827" />
  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" href="icons/icon-192.png" sizes="192x192" />
</head>
<body>
  <div id="lock-overlay" class="lock-overlay" hidden>
    <div class="lock-card">
      <h2>üîí Ange PIN</h2>
      <p>Denna app √§r l√•st. Skriv in din 4‚Äì8-siffriga PIN f√∂r att l√•sa upp.</p>
      <input id="pin-input" type="password" inputmode="numeric" minlength="4" maxlength="8" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
      <div class="row">
        <button id="pin-unlock" class="primary">L√•s upp</button>
        <button id="pin-reset" class="ghost">Gl√∂mt PIN?</button>
      </div>
      <small class="muted">PIN lagras lokalt och kan √•terst√§llas via Rensa data.</small>
    </div>
  </div>

  <header class="app-header">
    <div class="branding">
      <div class="logo">üí∏</div>
      <div>
        <h1>SkuldKoll</h1>
        <p>H√•ll koll p√• vem som √§r skyldig vad ‚Äì snabbt & snyggt</p>
      </div>
    </div>
    <div class="actions">
      <button id="toggle-theme" title="Byt tema">üåó</button>
      <button id="install-btn" class="primary" hidden>Installera</button>
      <button id="open-settings" title="Inst√§llningar">‚öôÔ∏è</button>
      <span id="offline-badge" class="badge" hidden>Offline</span>
    </div>
  </header>

  <main class="container">
    <!-- Formul√§r -->
    <section class="card">
      <h2>Ny skuld</h2>
      <form id="debt-form">
        <div class="grid">
          <label>
            Person
            <input type="text" id="debtor" placeholder="Namn eller kontakt" required />
          </label>
          <label>
            Belopp (kr)
            <input type="number" id="amount" step="0.01" min="0" placeholder="0.00" required />
          </label>
          <label>
            Datum
            <input type="date" id="date" required />
          </label>
          <label>
            Tid
            <input type="time" id="time" required />
          </label>
          <label>
            Kategori
            <select id="category">
              <option value="Annat">Annat</option>
              <option value="Lunch/Fika">Lunch/Fika</option>
              <option value="Br√§nsle">Br√§nsle</option>
              <option value="Verktyg/L√•n">Verktyg/L√•n</option>
              <option value="Hyra">Hyra</option>
            </select>
          </label>
          <label>
            Plats
            <input type="text" id="place" placeholder="Ex: Hemma, P√• jobbet, ICA..." />
          </label>
          <label class="full">
            Anteckning
            <textarea id="note" rows="2" placeholder="Kort beskrivning (valfritt)"></textarea>
          </label>
        </div>

        <div class="form-actions">
          <label class="switch">
            <input type="checkbox" id="status" />
            <span>Markera som betald</span>
          </label>
          <div class="right">
            <button type="reset" class="ghost">Rensa</button>
            <button type="submit" class="primary">L√§gg till</button>
          </div>
        </div>
      </form>
    </section>

    <!-- Filter & summering -->
    <section class="card">
      <div class="toolbar">
        <div class="filters">
          <input type="search" id="search" placeholder="S√∂k (person, plats, anteckning)" />
          <select id="filter-status">
            <option value="all">Alla</option>
            <option value="unpaid">Obetalda</option>
            <option value="paid">Betalda</option>
          </select>
          <select id="filter-category">
            <option value="all">Alla kategorier</option>
            <option value="Annat">Annat</option>
            <option value="Lunch/Fika">Lunch/Fika</option>
            <option value="Br√§nsle">Br√§nsle</option>
            <option value="Verktyg/L√•n">Verktyg/L√•n</option>
            <option value="Hyra">Hyra</option>
          </select>
          <select id="sort-by">
            <option value="date_desc">Senaste datum f√∂rst</option>
            <option value="date_asc">Tidigaste datum f√∂rst</option>
            <option value="amount_desc">H√∂gst belopp f√∂rst</option>
            <option value="amount_asc">L√§gst belopp f√∂rst</option>
            <option value="name_asc">Namn A‚Äì√ñ</option>
            <option value="name_desc">Namn √ñ‚ÄìA</option>
          </select>
        </div>
        <div class="export-buttons">
          <button id="export-json">Exportera JSON</button>
          <button id="export-csv">Exportera CSV</button>
          <label class="import">
            <input type="file" id="import-file" accept=".json,.csv" hidden />
            <span class="button">Importera</span>
          </label>
        </div>
      </div>

      <div id="summary" class="summary">
        <div><strong>Totalt obetalt:</strong> <span id="total-unpaid">‚Äì</span></div>
        <div><strong>Totalt betalt:</strong> <span id="total-paid">‚Äì</span></div>
        <div><strong>Summa:</strong> <span id="total-all">‚Äì</span></div>
      </div>

      <div id="people" class="people card-sub">
        <h3>Per person</h3>
        <ul id="people-list" class="chips"></ul>
      </div>

      <ul id="debt-list" class="list"></ul>
    </section>
  </main>

  <footer class="app-footer">
    <small>Byggd som PWA. Data lagras lokalt i din webbl√§sare.</small>
  </footer>

  <template id="debt-item-template">
    <li class="item">
      <div class="item-main">
        <div class="title">
          <span class="name"></span>
          <span class="amount"></span>
        </div>
        <div class="meta">
          <span class="status badge"></span>
          <span class="category badge"></span>
          <span class="datetime"></span>
          <span class="place"></span>
          <span class="note"></span>
        </div>
      </div>
      <div class="item-actions">
        <button class="mark-paid">Markera betald</button>
        <button class="edit ghost">Redigera</button>
        <button class="delete danger">Ta bort</button>
      </div>
    </li>
  </template>

  <dialog id="settings-dialog">
    <form method="dialog" class="settings">
      <h2>Inst√§llningar</h2>
      <section>
        <h3>P√•minnelser</h3>
        <label class="row">
          <input type="checkbox" id="reminders-enabled" />
          <span>Aktivera p√•minnelser f√∂r obetalda skulder</span>
        </label>
        <label>
          Dagar innan p√•minnelse
          <input type="number" id="reminder-days" min="1" max="365" value="14" />
        </label>
        <button id="request-permission" type="button" class="ghost">Till√•t notiser</button>
      </section>
      <section>
        <h3>PIN-l√•s</h3>
        <div class="row">
          <input type="password" id="pin-new" placeholder="Ny PIN (4‚Äì8 siffror)" minlength="4" maxlength="8" />
          <button id="pin-set" type="button" class="primary">S√§tt/√Ñndra PIN</button>
        </div>
        <button id="pin-remove" type="button" class="ghost">Ta bort PIN</button>
      </section>
      <section>
        <h3>Data</h3>
        <button id="clear-data" type="button" class="danger">Rensa all lokal data</button>
      </section>
      <div class="right">
        <button value="cancel" class="ghost">St√§ng</button>
      </div>
    </form>
  </dialog>

  <script src="app.js"></script>
</body>
</html>
